<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Fit Hub - Access</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body class="page">
    <main class="card">
      <h1>Fit Hub</h1>
      <p class="muted">Enter the shared admin token to access the leader dashboard.</p>
      <label class="field">
        <span>Admin Token</span>
        <input id="token-input" type="password" placeholder="x-admin-token" />
      </label>
      <label class="field">
        <span>Actor</span>
        <select id="actor-select">
          <option value="Braxton">Braxton</option>
          <option value="Brannon">Brannon</option>
          <option value="Asher">Asher</option>
          <option value="Danny">Danny</option>
        </select>
      </label>
      <button id="enter-button" class="primary">Enter</button>
      <p id="error" class="error"></p>
    </main>

    <script>
      const tokenInput = document.getElementById("token-input");
      const actorSelect = document.getElementById("actor-select");
      const enterButton = document.getElementById("enter-button");
      const error = document.getElementById("error");

      const existingToken = localStorage.getItem("fitHubToken");
      const existingActor = localStorage.getItem("fitHubActor");

      if (existingToken) {
        window.location.href = "/app.html";
      }

      if (existingActor) {
        actorSelect.value = existingActor;
      }

      enterButton.addEventListener("click", () => {
        const token = tokenInput.value.trim();
        const actor = actorSelect.value;

        if (!token) {
          error.textContent = "Token is required.";
          return;
        }

        localStorage.setItem("fitHubToken", token);
        localStorage.setItem("fitHubActor", actor);
        window.location.href = "/app.html";
      });
    </script>
  </body>
</html>
